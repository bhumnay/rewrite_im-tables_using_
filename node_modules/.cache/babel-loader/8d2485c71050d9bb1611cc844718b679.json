{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getFilterData = getFilterData;\nexports[\"default\"] = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _util = require(\"../../util\");\n\nvar _FilterDropdown = _interopRequireDefault(require(\"./FilterDropdown\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction collectFilterStates(columns, init, pos) {\n  var filterStates = [];\n  (columns || []).forEach(function (column, index) {\n    var columnPos = (0, _util.getColumnPos)(index, pos);\n\n    if ('children' in column) {\n      filterStates = [].concat(_toConsumableArray(filterStates), _toConsumableArray(collectFilterStates(column.children, init, columnPos)));\n    } else if ('filters' in column || 'filterDropdown' in column) {\n      if ('filteredValue' in column) {\n        // Controlled\n        filterStates.push({\n          column: column,\n          key: (0, _util.getColumnKey)(column, columnPos),\n          filteredKeys: column.filteredValue,\n          forceFiltered: column.filtered\n        });\n      } else {\n        // Uncontrolled\n        filterStates.push({\n          column: column,\n          key: (0, _util.getColumnKey)(column, columnPos),\n          filteredKeys: init && column.defaultFilteredValue ? column.defaultFilteredValue : undefined,\n          forceFiltered: column.filtered\n        });\n      }\n    }\n  });\n  return filterStates;\n}\n\nfunction injectFilter(prefixCls, dropdownPrefixCls, columns, filterStates, triggerFilter, getPopupContainer, locale, pos) {\n  return columns.map(function (column, index) {\n    var columnPos = (0, _util.getColumnPos)(index, pos);\n    var _column$filterMultipl = column.filterMultiple,\n        filterMultiple = _column$filterMultipl === void 0 ? true : _column$filterMultipl;\n\n    if ('filters' in column || 'filterDropdown' in column) {\n      var columnKey = (0, _util.getColumnKey)(column, columnPos);\n      var filterState = filterStates.find(function (_ref) {\n        var key = _ref.key;\n        return columnKey === key;\n      });\n      return _extends(_extends({}, column), {\n        title: function title(renderProps) {\n          return React.createElement(_FilterDropdown[\"default\"], {\n            prefixCls: \"\".concat(prefixCls, \"-filter\"),\n            dropdownPrefixCls: dropdownPrefixCls,\n            column: column,\n            columnKey: columnKey,\n            filterState: filterState,\n            filterMultiple: filterMultiple,\n            triggerFilter: triggerFilter,\n            locale: locale,\n            getPopupContainer: getPopupContainer\n          }, (0, _util.renderColumnTitle)(column.title, renderProps));\n        }\n      });\n    }\n\n    if ('children' in column) {\n      return _extends(_extends({}, column), {\n        children: injectFilter(prefixCls, dropdownPrefixCls, column.children, filterStates, triggerFilter, getPopupContainer, locale, columnPos)\n      });\n    }\n\n    return column;\n  });\n}\n\nfunction generateFilterInfo(filterStates) {\n  var currentFilters = {};\n  filterStates.forEach(function (_ref2) {\n    var key = _ref2.key,\n        filteredKeys = _ref2.filteredKeys;\n    currentFilters[key] = filteredKeys || null;\n  });\n  return currentFilters;\n}\n\nfunction flattenKeys(filters) {\n  var keys = [];\n  (filters || []).forEach(function (_ref3) {\n    var value = _ref3.value,\n        children = _ref3.children;\n    keys.push(value);\n\n    if (children) {\n      keys = [].concat(_toConsumableArray(keys), _toConsumableArray(flattenKeys(children)));\n    }\n  });\n  return keys;\n}\n\nfunction getFilterData(data, filterStates) {\n  return filterStates.reduce(function (currentData, filterState) {\n    var _filterState$column = filterState.column,\n        onFilter = _filterState$column.onFilter,\n        filters = _filterState$column.filters,\n        filteredKeys = filterState.filteredKeys;\n\n    if (onFilter && filteredKeys && filteredKeys.length) {\n      return currentData.filter(function (record) {\n        return filteredKeys.some(function (key) {\n          var keys = flattenKeys(filters);\n          var keyIndex = keys.findIndex(function (k) {\n            return String(k) === String(key);\n          });\n          var realKey = keyIndex !== -1 ? keys[keyIndex] : key;\n          return onFilter(realKey, record);\n        });\n      });\n    }\n\n    return currentData;\n  }, data);\n}\n\nfunction useFilter(_ref4) {\n  var prefixCls = _ref4.prefixCls,\n      dropdownPrefixCls = _ref4.dropdownPrefixCls,\n      columns = _ref4.columns,\n      onFilterChange = _ref4.onFilterChange,\n      getPopupContainer = _ref4.getPopupContainer,\n      tableLocale = _ref4.locale;\n\n  var _React$useState = React.useState(collectFilterStates(columns, true)),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      filterStates = _React$useState2[0],\n      setFilterStates = _React$useState2[1];\n\n  var mergedFilterStates = React.useMemo(function () {\n    var collectedStates = collectFilterStates(columns, false); // Return if not controlled\n\n    if (collectedStates.every(function (_ref5) {\n      var filteredKeys = _ref5.filteredKeys;\n      return filteredKeys === undefined;\n    })) {\n      return filterStates;\n    }\n\n    return collectedStates;\n  }, [columns, filterStates]);\n  var getFilters = React.useCallback(function () {\n    return generateFilterInfo(mergedFilterStates);\n  }, [mergedFilterStates]);\n\n  var triggerFilter = function triggerFilter(filterState) {\n    var newFilterStates = mergedFilterStates.filter(function (_ref6) {\n      var key = _ref6.key;\n      return key !== filterState.key;\n    });\n    newFilterStates.push(filterState);\n    setFilterStates(newFilterStates);\n    onFilterChange(generateFilterInfo(newFilterStates), newFilterStates);\n  };\n\n  var transformColumns = function transformColumns(innerColumns) {\n    return injectFilter(prefixCls, dropdownPrefixCls, innerColumns, mergedFilterStates, triggerFilter, getPopupContainer, tableLocale);\n  };\n\n  return [transformColumns, mergedFilterStates, getFilters];\n}\n\nvar _default = useFilter;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/home/bhumika/app1/node_modules/antd/lib/table/hooks/useFilter/index.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","getFilterData","React","_interopRequireWildcard","require","_util","_FilterDropdown","_interopRequireDefault","__esModule","_getRequireWildcardCache","WeakMap","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","TypeError","toString","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","length","err","Array","isArray","_extends","assign","target","arguments","source","apply","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","iter","from","arr2","collectFilterStates","columns","init","pos","filterStates","forEach","column","index","columnPos","getColumnPos","concat","children","getColumnKey","filteredKeys","filteredValue","forceFiltered","filtered","defaultFilteredValue","injectFilter","prefixCls","dropdownPrefixCls","triggerFilter","getPopupContainer","locale","map","_column$filterMultipl","filterMultiple","columnKey","filterState","find","_ref","title","renderProps","createElement","renderColumnTitle","generateFilterInfo","currentFilters","_ref2","flattenKeys","filters","keys","_ref3","data","reduce","currentData","_filterState$column","onFilter","filter","record","some","keyIndex","findIndex","k","String","realKey","useFilter","_ref4","onFilterChange","tableLocale","_React$useState","useState","_React$useState2","setFilterStates","mergedFilterStates","useMemo","collectedStates","every","_ref5","getFilters","useCallback","newFilterStates","_ref6","transformColumns","innerColumns","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getFilterData = getFilterData;\nexports[\"default\"] = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _util = require(\"../../util\");\n\nvar _FilterDropdown = _interopRequireDefault(require(\"./FilterDropdown\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction collectFilterStates(columns, init, pos) {\n  var filterStates = [];\n  (columns || []).forEach(function (column, index) {\n    var columnPos = (0, _util.getColumnPos)(index, pos);\n\n    if ('children' in column) {\n      filterStates = [].concat(_toConsumableArray(filterStates), _toConsumableArray(collectFilterStates(column.children, init, columnPos)));\n    } else if ('filters' in column || 'filterDropdown' in column) {\n      if ('filteredValue' in column) {\n        // Controlled\n        filterStates.push({\n          column: column,\n          key: (0, _util.getColumnKey)(column, columnPos),\n          filteredKeys: column.filteredValue,\n          forceFiltered: column.filtered\n        });\n      } else {\n        // Uncontrolled\n        filterStates.push({\n          column: column,\n          key: (0, _util.getColumnKey)(column, columnPos),\n          filteredKeys: init && column.defaultFilteredValue ? column.defaultFilteredValue : undefined,\n          forceFiltered: column.filtered\n        });\n      }\n    }\n  });\n  return filterStates;\n}\n\nfunction injectFilter(prefixCls, dropdownPrefixCls, columns, filterStates, triggerFilter, getPopupContainer, locale, pos) {\n  return columns.map(function (column, index) {\n    var columnPos = (0, _util.getColumnPos)(index, pos);\n    var _column$filterMultipl = column.filterMultiple,\n        filterMultiple = _column$filterMultipl === void 0 ? true : _column$filterMultipl;\n\n    if ('filters' in column || 'filterDropdown' in column) {\n      var columnKey = (0, _util.getColumnKey)(column, columnPos);\n      var filterState = filterStates.find(function (_ref) {\n        var key = _ref.key;\n        return columnKey === key;\n      });\n      return _extends(_extends({}, column), {\n        title: function title(renderProps) {\n          return React.createElement(_FilterDropdown[\"default\"], {\n            prefixCls: \"\".concat(prefixCls, \"-filter\"),\n            dropdownPrefixCls: dropdownPrefixCls,\n            column: column,\n            columnKey: columnKey,\n            filterState: filterState,\n            filterMultiple: filterMultiple,\n            triggerFilter: triggerFilter,\n            locale: locale,\n            getPopupContainer: getPopupContainer\n          }, (0, _util.renderColumnTitle)(column.title, renderProps));\n        }\n      });\n    }\n\n    if ('children' in column) {\n      return _extends(_extends({}, column), {\n        children: injectFilter(prefixCls, dropdownPrefixCls, column.children, filterStates, triggerFilter, getPopupContainer, locale, columnPos)\n      });\n    }\n\n    return column;\n  });\n}\n\nfunction generateFilterInfo(filterStates) {\n  var currentFilters = {};\n  filterStates.forEach(function (_ref2) {\n    var key = _ref2.key,\n        filteredKeys = _ref2.filteredKeys;\n    currentFilters[key] = filteredKeys || null;\n  });\n  return currentFilters;\n}\n\nfunction flattenKeys(filters) {\n  var keys = [];\n  (filters || []).forEach(function (_ref3) {\n    var value = _ref3.value,\n        children = _ref3.children;\n    keys.push(value);\n\n    if (children) {\n      keys = [].concat(_toConsumableArray(keys), _toConsumableArray(flattenKeys(children)));\n    }\n  });\n  return keys;\n}\n\nfunction getFilterData(data, filterStates) {\n  return filterStates.reduce(function (currentData, filterState) {\n    var _filterState$column = filterState.column,\n        onFilter = _filterState$column.onFilter,\n        filters = _filterState$column.filters,\n        filteredKeys = filterState.filteredKeys;\n\n    if (onFilter && filteredKeys && filteredKeys.length) {\n      return currentData.filter(function (record) {\n        return filteredKeys.some(function (key) {\n          var keys = flattenKeys(filters);\n          var keyIndex = keys.findIndex(function (k) {\n            return String(k) === String(key);\n          });\n          var realKey = keyIndex !== -1 ? keys[keyIndex] : key;\n          return onFilter(realKey, record);\n        });\n      });\n    }\n\n    return currentData;\n  }, data);\n}\n\nfunction useFilter(_ref4) {\n  var prefixCls = _ref4.prefixCls,\n      dropdownPrefixCls = _ref4.dropdownPrefixCls,\n      columns = _ref4.columns,\n      onFilterChange = _ref4.onFilterChange,\n      getPopupContainer = _ref4.getPopupContainer,\n      tableLocale = _ref4.locale;\n\n  var _React$useState = React.useState(collectFilterStates(columns, true)),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      filterStates = _React$useState2[0],\n      setFilterStates = _React$useState2[1];\n\n  var mergedFilterStates = React.useMemo(function () {\n    var collectedStates = collectFilterStates(columns, false); // Return if not controlled\n\n    if (collectedStates.every(function (_ref5) {\n      var filteredKeys = _ref5.filteredKeys;\n      return filteredKeys === undefined;\n    })) {\n      return filterStates;\n    }\n\n    return collectedStates;\n  }, [columns, filterStates]);\n  var getFilters = React.useCallback(function () {\n    return generateFilterInfo(mergedFilterStates);\n  }, [mergedFilterStates]);\n\n  var triggerFilter = function triggerFilter(filterState) {\n    var newFilterStates = mergedFilterStates.filter(function (_ref6) {\n      var key = _ref6.key;\n      return key !== filterState.key;\n    });\n    newFilterStates.push(filterState);\n    setFilterStates(newFilterStates);\n    onFilterChange(generateFilterInfo(newFilterStates), newFilterStates);\n  };\n\n  var transformColumns = function transformColumns(innerColumns) {\n    return injectFilter(prefixCls, dropdownPrefixCls, innerColumns, mergedFilterStates, triggerFilter, getPopupContainer, tableLocale);\n  };\n\n  return [transformColumns, mergedFilterStates, getFilters];\n}\n\nvar _default = useFilter;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}